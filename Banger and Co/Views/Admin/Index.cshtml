@{
    ViewData["Title"] = "Dashboard";
}

@model ViewModel

@if (Model.Admin != false)
{
    <h3 id="admin" hidden>admin</h3>
}

<input id="numofusers" value="@Model.NumberOfUsers" type="hidden" />
<input id="userspage" value="1" type="hidden" />
<input id="numofbookings" value="@Model.NumberOfBookings" type="hidden" />
<input id="bookingspage" value="1" type="hidden" />
<input id="numofvehicles" value="@Model.NumberOfVehicles" type="hidden" />
<input id="vehiclespage" value="1" type="hidden" />
<input id="numofequipment" value="@Model.NumberOfEquipment" type="hidden" />
<input id="equipmentpage" value="1" type="hidden" />

@*<input id="numofvehicles" value="@Model.NumberOfUsers" type="hidden" />
    <input id="vehiclespage" value="1" type="hidden" />

    <input id="numofbookings" value="@Model.NumberOfUsers" type="hidden" />
    <input id="bookingspage" value="1" type="hidden" />

    <input id="numofequipment" value="@Model.NumberOfUsers" type="hidden" />
    <input id="equipmentpage" value="1" type="hidden" />*@

<div class="admin_dashboard">
    <div class="admin_dashboard_panel">
        <span id="btnUsers" class="admin_dashboard_panel_menuitem">
            <label>USERS</label>
            <svg xmlns="http://www.w3.org/2000/svg" width="10" height="15" viewBox="0 0 24 24">
                <path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z" />
            </svg>
        </span>
        <span id="btnBookings" class="admin_dashboard_panel_menuitem">
            <label>BOOKINGS</label>
            <svg xmlns="http://www.w3.org/2000/svg" width="10" height="15" viewBox="0 0 24 24">
                <path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z" />
            </svg>
        </span>
        <span id="btnVehicles" class="admin_dashboard_panel_menuitem">
            <label>VEHICLES</label>
            <svg xmlns="http://www.w3.org/2000/svg" width="10" height="15" viewBox="0 0 24 24">
                <path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z" />
            </svg>
        </span>
        <span id="btnEquipment" class="admin_dashboard_panel_menuitem">
            <label>EQUIPMENT</label>
            <svg xmlns="http://www.w3.org/2000/svg" width="10" height="15" viewBox="0 0 24 24">
                <path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z" />
            </svg>
        </span>
    </div>
    <div class="admin_dashboard_content">
        <div id="Users" class="admin_dashboard_content_users">
            <div id="useroverlay" class="admin_dashboard_content_users_popup">
                <div id="addadminoverlay" class="admin_dashboard_content_users_popup_addadmin">
                    <button class='admin_dashboard_content_users_popup_addadmin_close' onclick='closeAddAdmin()' id='closepopup'><svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24'><path d='M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z'/></svg></button>
                    <div id="addadminoverlay" class="admin_dashboard_content_users_popup_addadmin_content">
                        <label class="admin_dashboard_content_users_popup_addadmin_content_heading">ADD ADMIN</label>
                        <div class="admin_dashboard_content_users_popup_addadmin_content_form">
                            <table>
                                <tr>
                                    <td>
                                        <label id="error" class="error" hidden></label>
                                        <label id="inputwarning" class="muted" hidden>Please fill all fields</label>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <input class="admin_dashboard_content_users_popup_addadmin_content_form_name" autocomplete="off" type="text" placeholder="Full Name" name="name" id="adminname" pattern="^[A-Za-z ,.'-]+$" required>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <input class="admin_dashboard_content_users_popup_addadmin_content_form_phone" autocomplete="off" type="text" placeholder="Contact Number" name="phone" id="adminphone" maxlength="10" pattern="^[0-9]*$" required>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <input class="admin_dashboard_content_users_popup_addadmin_content_form_email" autocomplete="off" type="email" placeholder="E-mail Address" name="email" id="adminemail" required>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <input class="admin_dashboard_content_users_popup_addadmin_content_form_pwd" autocomplete="off" type="password" placeholder="Password" name="pwd" id="adminpwd" required>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <button class="admin_dashboard_content_users_popup_addadmin_content_form_create" onclick="addAdmin()">Create Admin</button>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="admin_dashboard_content_users_search">
                <div>
                    <input id="usersearch" autocomplete="off" type="text" placeholder="Search">
                    <button id="addadmin" onclick="enableAddAdmin()"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M24 10h-10v-10h-4v10h-10v4h10v10h4v-10h10z"/></svg>ADD ADMIN</button>
                </div>
                <label id="usersearchlbl" class="muted">Enter 3 or more characters</label>
            </div>
            <div class="admin_dashboard_content_users_filter">
                <label class="admin_dashboard_content_users_filter_lbl">Show only: </label>
                <div class="admin_dashboard_content_users_filter_role">
                    <label>Role</label>
                    <button id="adminfilter">ADMIN</button>
                    <button id="clientfilter">CLIENT</button>
                </div>
                <div class="admin_dashboard_content_users_filter_status">
                    <label>Status</label>
                    <button id="nverifiedfilter">NOT VERIFIED</button>
                    <button id="verifiedfilter">VERIFIED</button>
                    <button id="blacklistfilter">BLACKLISTED</button>
                    <button id="repeatfilter">REPEAT</button>
                </div>
            </div>
            <div class="loading" id="usertoploading">
                <div></div>
                <div></div>
                <div></div>
            </div>
            <label class="admin_dashboard_content_users_empty" id="usersempty">We couldn't find anything</label>
            <div class="admin_dashboard_content_users_users">
                @foreach (var user in Model.Users)
                {
                    var index = Model.Users.IndexOf(user);

                    if (!Model.UserManager.GetRolesAsync(Model.UserManager.FindByNameAsync(user.UserName).Result).Result[0].Equals("SuperUser"))
                    {
                        <div class="admin_dashboard_content_users_users_user @index">
                            <div class="admin_dashboard_content_users_users_user_status">
                                @if (user.Status.Equals("Unverified"))
                                {
                                    <span class="admin_dashboard_content_users_users_user_status_notverified">NOT VERIFIED</span>
                                }
                                else
                                {
                                    if (user.Status.Equals("Blacklisted"))
                                    {
                                        if (Model.BookingService.GetCountOfUser(user.Id) != 0)
                                        {
                                            <span class="admin_dashboard_content_users_users_user_status_blacklisted">BLACKLISTED<svg onclick="removeBlacklist(@user.Id,@index)" id="userremoveblacklist" xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z" /><label id="userremoveblacklistid" hidden>@user.Id</label></svg></span>
                                            <span class="admin_dashboard_content_users_users_user_status_repeat">REPEAT</span>
                                            <span class="admin_dashboard_content_users_users_user_status_verified">VERIFIED</span>
                                        }
                                        else
                                        {
                                            <span class="admin_dashboard_content_users_users_user_status_blacklisted">BLACKLISTED<svg onclick="removeBlacklist(@user.Id,@index)" id="userremoveblacklist" xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z" /><label id="userremoveblacklistid" hidden>@user.Id</label></svg></span>
                                            <span class="admin_dashboard_content_users_users_user_status_verified">VERIFIED</span>
                                        }
                                    }
                                    else
                                    {
                                        if (Model.BookingService.GetCountOfUser(user.Id) != 0)
                                        {
                                            <span class="admin_dashboard_content_users_users_user_status_repeat">REPEAT</span>
                                            <span class="admin_dashboard_content_users_users_user_status_verified">VERIFIED</span>
                                        }
                                        else
                                        {
                                            <span class="admin_dashboard_content_users_users_user_status_verified">VERIFIED</span>
                                        }
                                    }
                                }
                            </div>
                            <div class="admin_dashboard_content_users_users_user_role">
                                @{
                                    var currentRole = Model.UserManager.GetRolesAsync(Model.UserManager.FindByNameAsync(User.Identity.Name).Result).Result[0];
                                }
                                <label>Type: @user.Role</label>
                                @if (currentRole.Equals("SuperUser"))
                                {
                                    @if (user.Role.Equals("Client"))
                                    {
                                        <button id="usermakeadmin" onclick="toggleAdminPriviledge(@user.Id,@index)">Grant Admin Privileges</button>
                                    }
                                    else
                                    {
                                        <button id="usermakeclient" onclick="toggleAdminPriviledge(@user.Id,@index)">Revoke Admin Privileges</button>
                                    }
                                }
                            </div>
                            <label>USER #@user.Id</label>
                            <label>Name: <span>@user.FullName</span></label>
                            <label>E-mail Address: <span>@user.Email</span></label>
                            <label>Contact Number: <span>@user.PhoneNumber</span></label>
                            <div class="admin_dashboard_content_users_users_user_buttons">
                                <div>
                                    <button id="usermoreinfo" onclick="userEdit(@user.Id, 0, @index)">More Info</button>
                                    @* <button id="useredit" onclick="userEdit(@user.Id, 1)">Edit</button> *@
                                </div>
                                <div>
                                    <button onclick="removeUser(@user.Id)" id="userremove">Remove User<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M9 19c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm4 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm4 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5-17v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.315c0 .901.73 2 1.631 2h5.712zm-3 4v16h-14v-16h-2v18h18v-18h-2z" /></svg></button>
                                </div>
                            </div>
                        </div>
                    }
                }
            </div>
            <div class="admin_dashboard_content_users_loadmore">
                <button id="userloadmore">Load More</button>
            </div>
            <div class="loading" id="userloading">
                <div></div>
                <div></div>
                <div></div>
            </div>
        </div>
        <div id="Bookings" class="admin_dashboard_content_bookings">
            <div class="admin_dashboard_content_bookings_search">
                <div>
                    <input id="bookingsearch" autocomplete="off" type="text" placeholder="Search">
                </div>
                <label id="bookingsearchlbl" class="muted">Enter 3 or more characters</label>
            </div>
            <div class="loading" id="bookingtoploading">
                <div></div>
                <div></div>
                <div></div>
            </div>
            <label class="admin_dashboard_content_bookings_empty" id="bookingsempty">We couldn't find anything</label>
            <div class="admin_dashboard_content_bookings_bookings">
                <table class="admin_dashboard_content_bookings_bookings_table" cellspacing="0" cellpadding="0">
                    <thead>
                        <tr>
                            <th>Reference No.</th>
                            <th>User ID</th>
                            <th>Pickup Date</th>
                            <th>Return Date</th>
                            <th>Status</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var booking in Model.Bookings)
                        {
                            var index = Model.Bookings.IndexOf(booking) + 1;

                            <tr>
                                <td>@booking.ReferenceNumber</td>
                                <td>@booking.User.Id</td>
                                <td>@booking.PickupDate</td>
                                <td>@booking.ReturnDate</td>
                                <td>@booking.Status</td>
                                <td><button onclick="bookingEdit(@booking.Id,0,@index)">More Details</button><button onclick="bookingEdit(@booking.Id,1,@index)">Edit</button></td>
                            </tr>
                        }
                            <tr>
                                <td>equipment.Id</td>
                                <td>quipment.EquipmentName</td>
                                <td>equipment.NumberOfPieces</td>
                                <td>equipment.NumberOfPieces</td>
                                <td>equipment.</td>
                                <td><div><button onclick="">More Details</button><button>Edit</button></div></td>
                            </tr>
                            <tr>
                                <td>equipment.Id</td>
                                <td>quipment.EquipmentName</td>
                                <td>equipment.NumberOfPieces</td>
                                <td>equipment.NumberOfPieces</td>
                                <td>equipment.</td>
                                <td><div><button onclick="">More Details</button><button>Edit</button></div></td>
                            </tr>
                    </tbody>
                </table>
            </div>
            <div class="admin_dashboard_content_bookings_loadmore">
                <button id="bookingloadmore">Load More</button>
            </div>
            <div class="loading" id="bookingloading">
                <div></div>
                <div></div>
                <div></div>
            </div>
        </div>
        <div id="Vehicles" class="admin_dashboard_content_vehicles">
            <div id="vehicleoverlay" class="admin_dashboard_content_vehicles_popup">
                <div id="addvehicleoverlay" class="admin_dashboard_content_vehicles_popup_addvehicle">
                    <button class='admin_dashboard_content_vehicles_popup_addvehicle_close' onclick='closeAddVehicle()' id='closepopup'><svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24'><path d='M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z'/></svg></button>
                    <div id="addvehicleoverlay" class="admin_dashboard_content_vehicles_popup_addvehicle_content">
                        <label class="admin_dashboard_content_vehicles_popup_addvehicle_content_heading">ADD VEHICLE</label>
                        <div class="admin_dashboard_content_vehicles_popup_addvehicle_content_form">
                            <table>
                                <tr>
                                    <td>
                                        <label id="error" class="error" hidden></label>
                                        <label id="inputwarning" class="muted" hidden>Please fill all fields</label>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <input class="admin_dashboard_content_vehicles_popup_addvehicle_content_form_manufacturer" autocomplete="off" type="text" placeholder="Manufacturer" name="manufacturer" id="vehiclemanufacturer" required>
                                        <label class="muted">Manufacturer will be created if it does not exist</label>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <input class="admin_dashboard_content_vehicles_popup_addvehicle_content_form_model" autocomplete="off" type="text" placeholder="Model" name="model" id="vehiclemodel" required>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <input class="admin_dashboard_content_vehicles_popup_addvehicle_content_form_year" autocomplete="off" type="text" placeholder="Year" name="year" id="vehicleyear" maxlength="4" pattern="^[0-9]*$" required>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <input class="admin_dashboard_content_vehicles_popup_addvehicle_content_form_color" autocomplete="off" type="text" placeholder="Color" name="color" id="vehiclecolor" required>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <select class="admin_dashboard_content_vehicles_popup_addvehicle_content_form_category" name="category" id="vehiclecategory" required>
                                            <option value="" selected>Select Category</option>
                                            <option value="Compact">Compact</option>
                                            <option value="Luxury">Luxury</option>
                                            <option value="Offroad">Offroad</option>
                                            <option value="Sedan">Sedan</option>
                                            <option value="Sports">Sports</option>
                                            <option value="SUV">SUV</option>
                                            <option value="Van">Van</option>
                                            <option value="Wagon">Wagon</option>
                                        </select>    
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <select class="admin_dashboard_content_vehicles_popup_addvehicle_content_form_fueltype" name="fueltype" id="vehiclefueltype" required>
                                            <option value="" selected>Select Fuel Type</option>
                                            <option value="Petrol">Petrol</option>
                                            <option value="Diesel">Diesel</option>
                                            <option value="Hybrid">Hybrid</option>
                                            <option value="Electric">Electric</option>
                                        </select>    
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <input class="admin_dashboard_content_vehicles_popup_addvehicle_content_form_plate" autocomplete="off" type="text" placeholder="Number Plate" name="plate" id="vehicleplate" required>
                                        <label class="muted">Eg: WPAAA1111</label>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <input class="admin_dashboard_content_vehicles_popup_addvehicle_content_form_rate" autocomplete="off" type="text" placeholder="Rate (per day)" name="rate" id="vehiclerate" pattern="^[1-9]\d*(\.\d+)?$" required>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <input class="admin_dashboard_content_vehicles_popup_addvehicle_content_form_img" type="file" id="vehicleimage" accept="image/*" required />
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <button class="admin_dashboard_content_vehicles_popup_addvehicle_content_form_create" onclick="addVehicle()">Create Vehicle</button>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="admin_dashboard_content_vehicles_search">
                <div>
                    <input id="vehiclesearch" autocomplete="off" type="text" placeholder="Search">
                    <button id="addvehicle" onclick="enableAddVehicle()"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M24 10h-10v-10h-4v10h-10v4h10v10h4v-10h10z"/></svg>ADD VEHICLE</button>
                </div>
                <label id="vehiclesearchlbl" class="muted">Enter 3 or more characters</label>
            </div>
            <div class="admin_dashboard_content_vehicles_filter">
                <label class="admin_dashboard_content_vehicles_filter_lbl">Show only: </label>
                <div class="admin_dashboard_content_vehicles_filter_status">
                    <label>Status</label>
                    <button id="availablefilter">AVAILABLE</button>
                    <button id="bookedfilter">BOOKED</button>
                </div>
                <div class="admin_dashboard_content_vehicles_filter_type">
                    <label>Vehicle Type</label>
                    <button id="compactfilter">COMPACT</button>
                    <button id="luxuryfilter">LUXURY</button>
                    <button id="offroadfilter">OFFROAD</button>
                    <button id="sedanfilter">SEDAN</button>
                    <button id="sportsfilter">SPORTS</button>
                    <button id="suvfilter">SUV</button>
                    <button id="vanfilter">VAN</button>
                    <button id="wagonfilter">WAGON</button>
                </div>
            </div>
            <div class="loading" id="vehicletoploading">
                <div></div>
                <div></div>
                <div></div>
            </div>
            <label class="admin_dashboard_content_vehicles_empty" id="vehiclesempty">We couldn't find anything</label>
            <div class="admin_dashboard_content_vehicles_vehicles">
                <table class="admin_dashboard_content_vehicles_vehicles_table" cellspacing="0" cellpadding="0">
                    <thead>
                        <tr>
                            <th>Vehicle ID</th>
                            <th>Manufacturer</th>
                            <th>Model</th>
                            <th>Year</th>
                            <th>Category</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var vehicle in Model.Vehicles)
                        {
                            var index = Model.Vehicles.IndexOf(vehicle) + 1;

                            <tr>
                                <td>@vehicle.Id</td>
                                <td>@vehicle.Manufacturer.ManufacturerName</td>
                                <td>@vehicle.Model</td>
                                <td>@vehicle.Year</td>
                                <td>@vehicle.Category</td>
                                <td><button onclick="vehicleEdit(@vehicle.Id,0,@index)">More Details</button><button onclick="vehicleEdit(@vehicle.Id,1,@index)">Edit</button></td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
            <div class="admin_dashboard_content_vehicles_vehicles">

            </div>
            <div class="admin_dashboard_content_vehicles_loadmore">
                <button id="vehicleloadmore">Load More</button>
            </div>
            <div class="loading" id="vehicleloading">
                <div></div>
                <div></div>
                <div></div>
            </div>
        </div>
        <div id="Equipment" class="admin_dashboard_content_equipment">
            <div id="equipmentoverlay" class="admin_dashboard_content_equipment_popup">
                <div id="addequipmentoverlay" class="admin_dashboard_content_equipment_popup_addequipment">
                    <button class='admin_dashboard_content_equipment_popup_addequipment_close' onclick='closeAddEquipment()' id='closepopup'><svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24'><path d='M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z'/></svg></button>
                    <div id="addequipmentoverlay" class="admin_dashboard_content_equipment_popup_addequipment_content">
                        <label class="admin_dashboard_content_equipment_popup_addequipment_content_heading">ADD EQUIPMENT</label>
                        <div class="admin_dashboard_content_equipment_popup_addequipment_content_form">
                            <table>
                                <tr>
                                    <td>
                                        <label id="error" class="error" hidden></label>
                                        <label id="inputwarning" class="muted" hidden>Please fill all fields</label>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <input class="admin_dashboard_content_equipment_popup_addequipment_content_form_name" autocomplete="off" type="text" placeholder="Equipment Name" name="name" id="equipmentname" pattern="^[A-Za-z ,.'-]+$" required>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <input class="admin_dashboard_content_equipment_popup_addequipment_content_form_stock" autocomplete="off" type="text" placeholder="Number of Pieces" name="stock" id="equipmentstock" pattern="^[0-9]*$" required>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <input class="admin_dashboard_content_vehicles_popup_addequipment_content_form_img" type="file" id="equipmentimage" accept="image/*" required="">
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <button class="admin_dashboard_content_vehicles_popup_addequipment_content_form_create" onclick="addEquipment()">Add Equipment</button>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="admin_dashboard_content_equipment_search">
                <div>
                    <input id="equipmentsearch" autocomplete="off" type="text" placeholder="Search">
                    <button id="addequipment" onclick="enableAddEquipment()"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M24 10h-10v-10h-4v10h-10v4h10v10h4v-10h10z"/></svg>ADD EQUIPMENT</button>
                </div>
                <label id="equipmentsearchlbl" class="muted">Enter 3 or more characters</label>
            </div>
            <div class="loading" id="equipmenttoploading">
                <div></div>
                <div></div>
                <div></div>
            </div>
            <label class="admin_dashboard_content_equipment_empty" id="equipmentempty">We couldn't find anything</label>
            <div class="admin_dashboard_content_equipment_equipment">
                <table class="admin_dashboard_content_equipment_equipment_table" cellspacing="0" cellpadding="0">
                    <thead>
                        <tr>
                            <th>Equipment ID</th>
                            <th>Name</th>
                            <th>Number of Pieces</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var equipment in Model.Equipments)
                        {
                            var index = Model.Equipments.IndexOf(equipment);

                            <tr>
                                <td>@equipment.Id</td>
                                <td>@equipment.EquipmentName</td>
                                <td>@equipment.NumberOfPieces</td>
                                <td><button onclick="equipmentEdit(@equipment.Id,0,@index)">More Details</button><button onclick="equipmentEdit(@equipment.Id,0,@index)">Edit</button></td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
            <div class="admin_dashboard_content_equipment_loadmore">
                <button id="equipmentloadmore">Load More</button>
            </div>
            <div class="loading" id="equipmentloading">
                <div></div>
                <div></div>
                <div></div>
            </div>
        </div>
    </div>
</div>


<script>
    $(document).ready(function () {
        $("#Bookings").hide();
        $("#Users").hide();
        $("#Vehicles").hide();
        $("#Equipment").hide();

        $("#usersempty").hide();
        $("#vehiclesempty").hide();
        $("#bookingsempty").hide();
        $("#equipmentempty").hide();

        $(".admin_dashboard_content_users_loadmore").hide();
        $(".admin_dashboard_content_vehicles_loadmore").hide();
        $(".admin_dashboard_content_bookings_loadmore").hide();
        $(".admin_dashboard_content_equipment_loadmore").hide();

        $("#userloading").hide();
        $("#vehicleloading").hide();
        $("#bookingloading").hide();
        $("#equipmentloading").hide();
        $("#usertoploading").hide();
        $("#vehicletoploading").hide();
        $("#bookingtoploading").hide();
        $("#equipmenttoploading").hide();

        toggleUsers();

        if ($("#admin").html() == "admin") {
            $(".header_nav_desktop").hide();
            $(".footer").hide();
            $(".header_signout").css("display", "flex");
        }

        $("body").css("min-height", "calc(100vh - 5.4rem)");
        $("body").css("max-height", "calc(100vh - 5.4rem)");
        $("body").css("overflow-y", "hidden");

        $("#usersearchlbl").css("width", "100%");
        $("#usersearchlbl").css("margin-bottom", "1rem");
        $("#vehiclesearchlbl").css("width", "100%");
        $("#vehiclesearchlbl").css("margin-bottom", "1rem");
        $("#bookingsearchlbl").css("width", "100%");
        $("#bookingsearchlbl").css("margin-bottom", "1rem");
        $("#equipmentsearchlbl").css("width", "100%");
        $("#equipmentsearchlbl").css("margin-bottom", "1rem");

        var usercalc = 10 * $("#userspage").val();
        if ($("#numofusers").val() != 0) {
            if ($("#numofusers").val() > $(".admin_dashboard_content_users_users_user").length && $(".admin_dashboard_content_users_users_user").length >= usercalc) {
                $(".admin_dashboard_content_users_loadmore").show();
            }
        }

        var vehiclecalc = 10 * $("#vehiclespage").val();
        if ($("#numofvehicles").val() != 0) {
            if ($("#numofvehicles").val() > $(".admin_dashboard_content_vehicles_vehicles_table tbody tr").length && $(".admin_dashboard_content_vehicles_vehicles_table tbody tr").length >= vehiclecalc) {
                $(".admin_dashboard_content_vehicles_loadmore").show();
            }
        }

        var bookingcalc = 10 * $("#bookingspage").val();
        if ($("#numofbookings").val() != 0) {
            if ($("#numofbookings").val() > $(".admin_dashboard_content_bookings_bookings_table tbody tr").length && $(".admin_dashboard_content_bookings_bookings_table tbody tr").length >= bookingcalc) {
                $(".admin_dashboard_content_bookings_loadmore").show();
            }
        }

        var equipmentcalc = 10 * $("#equipmentpage").val();
        if ($("#numofequipment").val() != 0) {
            if ($("#numofequipment").val() > $(".admin_dashboard_content_equipment_equipment_table tbody tr").length && $(".admin_dashboard_content_equipment_equipment_table tbody tr").length >= equipmentcalc) {
                $(".admin_dashboard_content_equipment_loadmore").show();
            }
        }
    });

    var btnBookings = document.getElementById("btnBookings");
    var btnUsers = document.getElementById("btnUsers");
    var btnVehicles = document.getElementById("btnVehicles");
    var btnEquipment = document.getElementById("btnEquipment");
    var Bookings = document.getElementById("Bookings");
    var Users = document.getElementById("Users");
    var Vehicles = document.getElementById("Vehicles");
    var Equipment = document.getElementById("Equipment");
    var addproductbtn = document.getElementById("addproductbtn");
    var addproductform = document.getElementById("addproductform");

    btnBookings.onclick = function () { toggleBookings(); };
    btnUsers.onclick = function () { toggleUsers(); };
    btnVehicles.onclick = function () { toggleVehicles(); };
    btnEquipment.onclick = function () { toggleEquipment(); };

    function toggleBookings() {
        if (btnUsers.classList.contains('active')) {
            btnUsers.classList.remove('active');
            btnBookings.className = "active";
            $("#Users").hide();
            $("#Bookings").show();
        }
        else if (btnVehicles.classList.contains('active')) {
            btnVehicles.classList.remove('active');
            btnBookings.className = "active";
            $("#Vehicles").hide();
            $("#Bookings").show();
        }
        else if (btnEquipment.classList.contains('active')) {
            btnEquipment.classList.remove('active');
            btnBookings.className = "active";
            $("#Equipment").hide();
            $("#Bookings").show();
        }
        else {
            btnBookings.className = "active";
            $("#Bookings").show();
        }
    }

    function toggleUsers() {
        if (btnBookings.classList.contains('active')) {
            btnBookings.classList.remove('active');
            btnUsers.className = "active";
            $("#Bookings").hide();
            $("#Users").show();
        }
        else if (btnVehicles.classList.contains('active')) {
            btnVehicles.classList.remove('active');
            btnUsers.className = "active";
            $("#Vehicles").hide();
            $("#Users").show();
        }
        else if (btnEquipment.classList.contains('active')) {
            btnEquipment.classList.remove('active');
            btnUsers.className = "active";
            $("#Equipment").hide();
            $("#Users").show();
        }
        else {
            btnUsers.className = "active";
            $("#Users").show();
        }

    }

    function toggleVehicles() {
        if (btnBookings.classList.contains('active')) {
            btnBookings.classList.remove('active');
            btnVehicles.className = "active";
            $("#Bookings").hide();
            $("#Vehicles").show();
        }
        else if (btnUsers.classList.contains('active')) {
            btnUsers.classList.remove('active');
            btnVehicles.className = "active";
            $("#Users").hide();
            $("#Vehicles").show();
        }
        else if (btnEquipment.classList.contains('active')) {
            btnEquipment.classList.remove('active');
            btnVehicles.className = "active";
            $("#Equipment").hide();
            $("#Vehicles").show();
        }
        else {
            btnVehicles.className = "active";
            $("#Vehicles").show();
        }
    }

    function toggleEquipment() {
        if (btnBookings.classList.contains('active')) {
            btnBookings.classList.remove('active');
            btnEquipment.className = "active";
            $("#Bookings").hide();
            $("#Equipment").show();
        }
        else if (btnUsers.classList.contains('active')) {
            btnUsers.classList.remove('active');
            btnEquipment.className = "active";
            $("#Users").hide();
            $("#Equipment").show();
        }
        else if (btnVehicles.classList.contains('active')) {
            btnVehicles.classList.remove('active');
            btnEquipment.className = "active";
            $("#Vehicles").hide();
            $("#Equipment").show();
        }
        else {
            btnEquipment.className = "active";
            $("#Equipment").show();
        }
    }

    $("#vehiclesearch").on("input", function (e) {
        if (e.keyCode == 8) {
            if ($(this).val().length < 3) {
                $("#vehiclesearchlbl").css("color", "red");
            }
            else {
                $("#vehiclesearchlbl").css("color", "grey");

                var keyword = $("#vehiclesearch").val();
            }
        }
        else {
            if ($(this).val().length < 3) {
                $("#vehiclesearchlbl").css("color", "red");
            }
            else {
                $("#vehiclesearchlbl").css("color", "dimgrey");

                var keyword = $("#vehiclesearch").val();
            }
        }
    });
    $("#vehiclesearch").focusout(function (e) {
        if (e.keyCode == 8) {
            if ($(this).val().length < 3) {
                $("#vehiclesearchlbl").css("color", "red");
            }
            else {
                $("#vehiclesearchlbl").css("color", "grey");
            }
        }
        else {
            if ($(this).val().length < 3 && $(this).val().length > 0) {
                $("#vehiclesearchlbl").css("color", "red");
            }
            else {
                $("#vehiclesearchlbl").css("color", "dimgrey");
            }
        }
    });

    $("#bookingsearch").on("input", function (e) {
        if (e.keyCode == 8) {
            if ($(this).val().length < 3) {
                $("#bookingsearchlbl").css("color", "red");
            }
            else {
                $("#bookingsearchlbl").css("color", "grey");

                var keyword = $("#bookingsearch").val();
            }
        }
        else {
            if ($(this).val().length < 3) {
                $("#bookingsearchlbl").css("color", "red");
            }
            else {
                $("#bookingsearchlbl").css("color", "dimgrey");

                var keyword = $("#bookingsearch").val();
            }
        }
    });
    $("#bookingsearch").focusout(function (e) {
        if (e.keyCode == 8) {
            if ($(this).val().length < 3) {
                $("#bookingsearchlbl").css("color", "red");
            }
            else {
                $("#bookingsearchlbl").css("color", "grey");
            }
        }
        else {
            if ($(this).val().length < 3 && $(this).val().length > 0) {
                $("#bookingsearchlbl").css("color", "red");
            }
            else {
                $("#bookingsearchlbl").css("color", "dimgrey");
            }
        }
    });


    //User filter
    function filterRoleStatus(role, status) {
        $(".admin_dashboard_content_users_loadmore").hide();
        $("#usersempty").hide();

        if ($("#usersearch").val().length !== 0) {
            $("#usersearch").val("")
        }

        $.ajax({
            type: "POST",
            url: '/Admin/GetUsers?role=' + role + '&status=' + status,
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                $("#usertoploading").show();

                if (data[0] != 0) {
                    $("#userspage").val(0);
                    $("#numofusers").val(data[0]);
                    delete data[0];

                    $(".admin_dashboard_content_users_filter_role button").removeClass("active");
                    $(".admin_dashboard_content_users_filter_status button").removeClass("active");

                    if (role == "Admin") {
                        $("#adminfilter").addClass("active");
                    }
                    else {
                        $("#clientfilter").addClass("active");
                    }
                    if (status == "Unverified") {
                        $("#nverifiedfilter").addClass("active");
                    }
                    else if (status == "Verified") {
                        $("#verifiedfilter").addClass("active");
                    }
                    else if (status == "Blacklisted") {
                        $("#blacklistfilter").addClass("active");
                    }
                    else {
                        $("#repeatfilter").addClass("active");
                    }

                    setTimeout(function () {
                        $("#usertoploading").hide();

                        if (data.length != 0) {
                            $(".admin_dashboard_content_users_users").empty();
                            $(".admin_dashboard_content_users_users").append(data);

                            $("#userspage").val(parseInt($("#userspage").val()) + 1);

                            var calc = 10 * $("#userspage").val();
                            if ($("#numofusers").val() > $(".admin_dashboard_content_users_users_user").length && $(".admin_dashboard_content_users_users_user").length >= calc) {
                                $(".admin_dashboard_content_users_loadmore").show();
                            }
                        }
                        else {
                            $(".admin_dashboard_content_users_users").empty();
                            $("#usersempty").show();
                        }
                    }, 1000);
                }
            },
            error: function (error) {
                console.log(error);
                alert("Error while retrieving data");
            }
        });
    }
    function filterRole(role) {
        $(".admin_dashboard_content_users_loadmore").hide();
        $("#usersempty").hide();

        if ($("#usersearch").val().length !== 0) {
            $("#usersearch").val("")
        }

        $.ajax({
            type: "POST",
            url: '/Admin/GetUsers?role=' + role,
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                $("#usertoploading").show();

                if (data[0] != 0) {
                    $("#userspage").val(0);
                    $("#numofusers").val(data[0]);
                    delete data[0];

                    if (role === "Admin") {
                        $("#adminfilter").addClass("active");

                        if ($("#clientfilter").hasClass("active")) {
                            $("#clientfilter").removeClass("active");
                        }
                    }
                    else {
                        $("#clientfilter").addClass("active");

                        if ($("#adminfilter").hasClass("active")) {
                            $("#adminfilter").removeClass("active");
                        }
                    }

                    setTimeout(function () {
                        $("#usertoploading").hide();

                        if (data.length != 0) {
                            $(".admin_dashboard_content_users_users").empty();
                            $(".admin_dashboard_content_users_users").append(data);

                            $("#userspage").val(parseInt($("#userspage").val()) + 1);

                            var calc = 10 * $("#userspage").val();
                            if ($("#numofusers").val() > $(".admin_dashboard_content_users_users_user").length && $(".admin_dashboard_content_users_users_user").length >= calc) {
                                $(".admin_dashboard_content_users_loadmore").show();
                            }
                        }
                        else {
                            $(".admin_dashboard_content_users_users").empty();
                            $("#usersempty").show();
                        }
                    }, 1000);
                }
            },
            error: function (error) {
                console.log(error);
                alert("Error while retrieving data");
            }
        });
    }
    function filterStatus(status) {
        $(".admin_dashboard_content_users_loadmore").hide();
        $("#usersempty").hide();

        if ($("#usersearch").val().length !== 0) {
            $("#usersearch").val("")
        }

        $.ajax({
            type: "POST",
            url: '/Admin/GetUsers?status=' + status,
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                $("#usertoploading").show();

                if (data[0] != 0) {
                    $("#userspage").val(0);
                    $("#numofusers").val(data[0]);
                    delete data[0];

                    $(".admin_dashboard_content_users_filter_status button").removeClass("active");

                    if (status == "Unverified") {
                        $("#nverifiedfilter").addClass("active");
                    }
                    else if (status == "Verified") {
                        $("#verifiedfilter").addClass("active");
                    }
                    else if (status == "Blacklisted") {
                        $("#blacklistfilter").addClass("active");
                    }
                    else {
                        $("#repeatfilter").addClass("active");
                    }

                    setTimeout(function () {
                        $("#usertoploading").hide();

                        if (data.length != 0) {
                            $(".admin_dashboard_content_users_users").empty();
                            $(".admin_dashboard_content_users_users").append(data);

                            $("#userspage").val(parseInt($("#userspage").val()) + 1);

                            var calc = 10 * $("#userspage").val();
                            if ($("#numofusers").val() > $(".admin_dashboard_content_users_users_user").length && $(".admin_dashboard_content_users_users_user").length >= calc) {
                                $(".admin_dashboard_content_users_loadmore").show();
                            }
                        }
                        else {
                            $(".admin_dashboard_content_users_users").empty();
                            $("#usersempty").show();
                        }
                    }, 1000);
                }
            },
            error: function (error) {
                console.log(error);
                alert("Error while retrieving data");
            }
        });
    }
    function getAllUsers() {
        $(".admin_dashboard_content_users_loadmore").hide();
        $("#usersempty").hide();

        $.ajax({
            type: "POST",
            url: '/Admin/GetUsers',
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                $("#usertoploading").show();

                if (data[0] != 0) {
                    $("#userspage").val(0);
                    $("#numofusers").val(data[0]);
                    delete data[0];

                    setTimeout(function () {
                        $("#usertoploading").hide();

                        if (data.length != 0) {
                            $(".admin_dashboard_content_users_users").empty();
                            $(".admin_dashboard_content_users_users").append(data);

                            $("#userspage").val(parseInt($("#userspage").val()) + 1);

                            var calc = 10 * $("#userspage").val();
                            if ($("#numofusers").val() > $(".admin_dashboard_content_users_users_user").length && $(".admin_dashboard_content_users_users_user").length >= calc) {
                                $(".admin_dashboard_content_users_loadmore").show();
                            }
                        }
                        else {
                            $(".admin_dashboard_content_users_users").empty();
                            $("#usersempty").show();
                        }
                    }, 1000);
                }
            },
            error: function (error) {
                console.log(error);
                alert("Error while retrieving data");
            }
        });
    }
    function searchUsers(keyword) {
        $(".admin_dashboard_content_users_loadmore").hide();
        $("#usersempty").hide();

        $("admin_dashboard_content_users_filter_role button").removeClass("active");
        $("admin_dashboard_content_users_filter_status button").removeClass("active");

        $.ajax({
            type: "POST",
            url: '/Admin/GetUsers?keyword=' + keyword,
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                if (data[0] != 0) {
                    $("#userspage").val(0);
                    $("#numofusers").val(data[0]);
                    delete data[0];

                    setTimeout(function () {
                        $("#usertoploading").hide();

                        if (data.length != 0) {
                            $(".admin_dashboard_content_users_users").empty();
                            $(".admin_dashboard_content_users_users").append(data);

                            $("#userspage").val(parseInt($("#userspage").val()) + 1);

                            var calc = 10 * $("#userspage").val();
                            if ($("#numofusers").val() > $(".admin_dashboard_content_users_users_user").length && $(".admin_dashboard_content_users_users_user").length >= calc) {
                                $(".admin_dashboard_content_users_loadmore").show();
                            }
                        }
                        else {
                            $(".admin_dashboard_content_users_users").empty();
                            $("#usersempty").show();
                        }
                    }, 1000);
                }
            },
            error: function (error) {
                console.log(error);
                alert("Error while retrieving data");
            }
        });
    }

    $("#usersearch").on("input", function (e) {
        if (e.keyCode == 8) {
            if ($(this).val().length < 3) {
                $("#usersearchlbl").css("color", "red");
                searchUsers("");
            }
            else {
                $("#usersearchlbl").css("color", "grey");

                searchUsers($("#usersearch").val());
            }
        }
        else {
            if ($(this).val().length < 3) {
                $("#usersearchlbl").css("color", "red");
            }
            else {
                $("#usersearchlbl").css("color", "dimgrey");

                searchUsers($("#usersearch").val());
            }
        }
    });
    $("#usersearch").keyup(function (e) {
        if (e.keyCode == 8) {
            if ($(this).val().length < 3) {
                $("#usersearchlbl").css("color", "red");
                searchUsers("");
            }
            else {
                $("#usersearchlbl").css("color", "grey");

                searchUsers($("#usersearch").val());
            }
        }
    });
    $("#usersearch").focusout(function (e) {
        if (e.keyCode == 8) {
            if ($(this).val().length < 3) {
                $("#usersearchlbl").css("color", "red");
            }
            else {
                $("#usersearchlbl").css("color", "grey");
            }
        }
        else {
            if ($(this).val().length < 3 && $(this).val().length > 0) {
                $("#usersearchlbl").css("color", "red");
            }
            else {
                $("#usersearchlbl").css("color", "dimgrey");
            }
        }
    });
    $("#userloadmore").click(function () {
        $(".admin_dashboard_content_users_loadmore").hide();
        $("#userloading").show();

        var url = null;
        var role = null;
        var status = null;
        var c = 10 * $("#userspage").val();

        if ($("#usersearch").val().length !== 0) {
            url = '/Admin/GetUsers?keyword=' + $("#usersearch").val() + '&skip=' + c;
        }
        else if ($(".admin_dashboard_content_users_filter_role").find("button.active").length !== 0) {
            if ($(".admin_dashboard_content_users_filter_role").find("button.active").attr('id') === "adminfilter") {
                role = "Admin";
            }
            else {
                role = "Client";
            }

            if ($(".admin_dashboard_content_users_filter_status").find("button.active").length !== 0) {
                if ($(".admin_dashboard_content_users_filter_status").find("button.active").attr('id') === "nverifiedfilter") {
                    status = "Unverified";
                    url = '/Admin/GetUsers?status=' + status + '&role=' + role + '&skip=' + c;
                }
                else if ($(".admin_dashboard_content_users_filter_status").find("button.active").attr('id') === "verifiedfilter") {
                    status = "Verified";
                    url = '/Admin/GetUsers?status=' + status + '&role=' + role + '&skip=' + c;
                }
                else if ($(".admin_dashboard_content_users_filter_status").find("button.active").attr('id') === "blacklistfilter") {
                    status = "Blacklisted";
                    url = '/Admin/GetUsers?status=' + status + '&role=' + role + '&skip=' + c;
                }
                else {
                    status = "Repeat";
                    url = '/Admin/GetUsers?status=' + status + '&role=' + role + '&skip=' + c;
                }
            }
            else {
                url = '/Admin/GetUsers?role=' + role + '&skip=' + c;
            }
        }
        else if ($(".admin_dashboard_content_users_filter_status").find("button.active").length !== 0) {
            if ($(".admin_dashboard_content_users_filter_status").find("button.active").attr('id') === "nverifiedfilter") {
                status = "Unverified";
            }
            else if ($(".admin_dashboard_content_users_filter_status").find("button.active").attr('id') === "verifiedfilter") {
                status = "Verified";
            }
            else if ($(".admin_dashboard_content_users_filter_status").find("button.active").attr('id') === "blacklistfilter") {
                status = "Blacklisted";
            }
            else {
                status = "Repeat";
            }

            if ($(".admin_dashboard_content_users_filter_role").find("button.active").length !== 0) {
                if ($(".admin_dashboard_content_users_filter_role").find("button.active").attr('id') === "adminfilter") {
                    role = "Admin";
                    url = '/Admin/GetUsers?status=' + status + '&role=' + role + '&skip=' + c;
                }
                else {
                    role = "Client";
                    url = '/Admin/GetUsers?status=' + status + '&role=' + role + '&skip=' + c;
                }
            }
            else {
                url = '/Admin/GetUsers?status=' + status + '&skip=' + c;
            }
        }
        else {
            url = '/Admin/GetUsers?skip=' + c;
        }

        $.ajax({
            type: "POST",
            url: url,
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                setTimeout(function () {
                    $(".admin_dashboard_content_users_users").append(data);
                    $("#userloading").hide();
                    $("#userspage").val(parseInt($("#userspage").val()) + 1);

                    var calc = 10 * $("#userspage").val();
                    var calc1 = $("#numofusers").val();
                    var calc2 = $("#userspage").val();
                    if ($("#numofusers").val() > $(".admin_dashboard_content_users_users_user").length && $(".admin_dashboard_content_users_users_user").length >= calc) {
                        $(".admin_dashboard_content_users_loadmore").show();
                    }
                }, 1000);
            },
            error: function (error) {
                console.log(error);
                alert("Error while retrieving data");
            }
        });
    });
    $("#adminfilter").click(function () {
        if (!$(this).hasClass("active")) {
            if ($(".admin_dashboard_content_users_filter_status").find("button.active").length !== 0) {
                if ($("#nverifiedfilter").hasClass("active")) {
                    filterRoleStatus("Admin", "Unverified");
                }
                else if ($("#verifiedfilter").hasClass("active")) {
                    filterRoleStatus("Admin", "Verified");
                }
                else if ($("#blacklistfilter").hasClass("active")) {
                    filterRoleStatus("Admin", "Blacklisted");
                }
                else {
                    filterRoleStatus("Admin", "Repeat");
                }
            }
            else {
                filterRole("Admin");
            }
        }
        else {
            $("#adminfilter").removeClass("active");

            if ($(".admin_dashboard_content_users_filter_status").find("button.active").length !== 0) {
                if ($("#nverifiedfilter").hasClass("active")) {
                    filterStatus("Unverified");
                }
                else if ($("#verifiedfilter").hasClass("active")) {
                    filterStatus("Verified");
                }
                else if ($("#blacklistfilter").hasClass("active")) {
                    filterStatus("Blacklisted");
                }
                else {
                    filterStatus("Repeat");
                }
            }
            else {
                getAllUsers();
            }
        }
    });
    $("#clientfilter").click(function () {
        if (!$(this).hasClass("active")) {
            if ($(".admin_dashboard_content_users_filter_status").find("button.active").length !== 0) {
                if ($("#nverifiedfilter").hasClass("active")) {
                    filterRoleStatus("Client", "Unverified");
                }
                else if ($("#verifiedfilter").hasClass("active")) {
                    filterRoleStatus("Client", "Verified");
                }
                else if ($("#blacklistfilter").hasClass("active")) {
                    filterRoleStatus("Client", "Blacklisted");
                }
                else {
                    filterRoleStatus("Client", "Repeat");
                }
            }
            else {
                filterRole("Client");
            }
        }
        else {
            $("#clientfilter").removeClass("active");

            if ($(".admin_dashboard_content_users_filter_status").find("button.active").length !== 0) {
                if ($("#nverifiedfilter").hasClass("active")) {
                    filterStatus("Unverified");
                }
                else if ($("#verifiedfilter").hasClass("active")) {
                    filterStatus("Verified");
                }
                else if ($("#blacklistfilter").hasClass("active")) {
                    filterStatus("Blacklisted");
                }
                else {
                    filterStatus("Repeat");
                }
            }
            else {
                getAllUsers();
            }
        }
    });
    $("#nverifiedfilter").click(function () {
        if (!$(this).hasClass("active")) {
            if ($(".admin_dashboard_content_users_filter_role").find("button.active").length !== 0) {
                if ($("#adminfilter").hasClass("active")) {
                    filterRoleStatus("Admin", "Unverified");
                }
                else {
                    filterRoleStatus("Client", "Unverified");
                }
            }
            else {
                filterStatus("Unverified");
            }
        }
        else {
            $("#nverifiedfilter").removeClass("active");

            if ($(".admin_dashboard_content_users_filter_role").find("button.active").length !== 0) {
                if ($("#adminfilter").hasClass("active")) {
                    filterRole("Admin");
                }
                else {
                    filterRole("Client");
                }
            }
            else {
                getAllUsers();
            }
        }
    });
    $("#verifiedfilter").click(function () {
        if (!$(this).hasClass("active")) {
            if ($(".admin_dashboard_content_users_filter_role").find("button.active").length !== 0) {
                if ($("#adminfilter").hasClass("active")) {
                    filterRoleStatus("Admin", "Verified");
                }
                else {
                    filterRoleStatus("Client", "Verified");
                }
            }
            else {
                filterStatus("Verified");
            }
        }
        else {
            $("#verifiedfilter").removeClass("active");

            if ($(".admin_dashboard_content_users_filter_role").find("button.active").length !== 0) {
                if ($("#adminfilter").hasClass("active")) {
                    filterRole("Admin");
                }
                else {
                    filterRole("Client");
                }
            }
            else {
                getAllUsers();
            }
        }
    });
    $("#blacklistfilter").click(function () {
        if (!$(this).hasClass("active")) {
            if ($(".admin_dashboard_content_users_filter_role").find("button.active").length !== 0) {
                if ($("#adminfilter").hasClass("active")) {
                    filterRoleStatus("Admin", "Blacklisted");
                }
                else {
                    filterRoleStatus("Client", "Blacklisted");
                }
            }
            else {
                filterStatus("Blacklisted");
            }
        }
        else {
            $("#blacklistfilter").removeClass("active");

            if ($(".admin_dashboard_content_users_filter_role").find("button.active").length !== 0) {
                if ($("#adminfilter").hasClass("active")) {
                    filterRole("Admin");
                }
                else {
                    filterRole("Client");
                }
            }
            else {
                getAllUsers();
            }
        }
    });
    $("#repeatfilter").click(function () {
        if (!$(this).hasClass("active")) {
            if ($(".admin_dashboard_content_users_filter_role").find("button.active").length !== 0) {
                if ($("#adminfilter").hasClass("active")) {
                    filterRoleStatus("Admin", "Repeat");
                }
                else {
                    filterRoleStatus("Client", "Repeat");
                }
            }
            else {
                filterStatus("Repeat");
            }
        }
        else {
            $("#repeatfilter").removeClass("active");

            if ($(".admin_dashboard_content_users_filter_role").find("button.active").length !== 0) {
                if ($("#adminfilter").hasClass("active")) {
                    filterRole("Admin");
                }
                else {
                    filterRole("Client");
                }
            }
            else {
                getAllUsers();
            }
        }
    });

    //User Actions
    function updateUserDetails(id, usernum) {
        $.ajax({
            type: "POST",
            url: '/Admin/GetUpdatedUserDetails?id=' + id + '&index=' + usernum,
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                $(".admin_dashboard_content_users_users_user." + usernum).empty();
                $(".admin_dashboard_content_users_users_user." + usernum).append(data);
            },
            error: function (error) {
                console.log(error);
                alert("Error while retrieving data");
            }
        });
    }

    function removeBlacklist(id, usernum) {
        $.ajax({
            type: "POST",
            url: '/Admin/RemoveBlacklist?id=' + id,
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                if (data == "Success") {
                    updateUserDetails(id, usernum);
                    alert("Successfully removed user #" + id + " from blacklist");
                }
                else {
                    alert("Error while updating");
                }
            },
            error: function () {
                alert("Error while updating");
            }
        });
    }

    function toggleAdminPriviledge(id, usernum) {
        $.ajax({
            type: "POST",
            url: '/Admin/ToggleAdminPriviledge?id=' + id,
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                if (data.includes("Success")) {
                    updateUserDetails(id, usernum);

                    if (data.includes("Admin")) {
                        alert("Successfully granted admin privileges for user #" + id);
                    }
                    else {
                        alert("Successfully revoked admin privileges from user #" + id);
                    }
                }
                else {
                    alert("Error while updating");
                }
            },
            error: function () {
                alert("Error while updating");
            }
        });
    }

    function removeUser(id) {
        var confirmation = confirm("Are you sure you want to remove user# " + id + " ?");

        if (confirmation == true) {
            $.ajax({
                type: "POST",
                url: '/Admin/RemoveUser?id=' + id,
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    if (data == "Success") {
                        alert("Successfully removed user #" + id);
                    }
                    else if (data == "Failure") {
                        alert("Error while removing user");
                    }
                    else if (data == "Active") {
                        alert("Unable to remove user due to active bookings");
                    }
                    else {
                        alert("Error while removing user");
                    }
                },
                error: function () {
                    alert("Error while removing user");
                }
            });
        }
    }

    function enableAddAdmin() {
        $("#useroverlay").addClass("active");
        $("#addadminoverlay").addClass("active");
        $("#addadminoverlay input").val("");
    }

    function closeAddAdmin() {
        $("#useroverlay").removeClass("active");
        $("#addadminoverlay").removeClass("active");
    }

    function addAdmin() {
        var decimal = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,20}$/;
        var name = $("#adminname").val();
        var email = $("#adminemail").val();
        var phone = $("#adminphone").val();
        var password = $("#adminpwd").val();

        $(".admin_dashboard_content_users_popup_addadmin_content_form_name").css("border", "2px solid gray");
        $(".admin_dashboard_content_users_popup_addadmin_content_form_email").css("border", "2px solid gray");
        $(".admin_dashboard_content_users_popup_addadmin_content_form_phone").css("border", "2px solid gray");
        $(".admin_dashboard_content_users_popup_addadmin_content_form_pwd").css("border", "2px solid gray");

        if (name != "" && email != "" && phone != "" && password != "") {
            $.ajax({
                type: "POST",
                url: '/User/CheckEmailPhone?email=' + email + "&phone=" + phone,
                dataType: "json",
                async: false,
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    if (data == "notavailableemail") {
                        $(".admin_dashboard_content_users_popup_addadmin_content_form_email").css("border", "2px solid red");
                        alert("The e-mail address you entered is registered with the system. Please enter a valid e-mail address.");
                    }
                    else if (data == "notavailablephone") {
                        $(".admin_dashboard_content_users_popup_addadmin_content_form_phone").css("border", "2px solid red");
                        alert("The contact number you entered is registered with the system. Please enter a valid contact number.");
                    }
                    else if (data == "notavailableemailphone") {
                        $(".admin_dashboard_content_users_popup_addadmin_content_form_email").css("border", "2px solid red");
                        $(".admin_dashboard_content_users_popup_addadmin_content_form_phone").css("border", "2px solid red");
                        alert("The e-mail address and contact number you entered are registered with the system. Please enter a valid e-mail address and contact number.");
                    }
                    else {
                        if (String(password).match(decimal)) {
                            $.ajax({
                                type: "POST",
                                url: '/Admin/AddAdmin?name=' + name + '&email=' + email + '&phone=' + phone + '&pwd=' + password,
                                dataType: "json",
                                contentType: "application/json; charset=utf-8",
                                success: function (data) {
                                    if (data == "Success") {
                                        closeAddAdmin();
                                        $(".admin_dashboard_content_users_filter button").removeClass("active");
                                        getAllUsers();
                                        alert("Administrator account created successfully!");
                                    }
                                    else {
                                        alert("Error while creating admin");
                                    }
                                },
                                error: function () {
                                    alert("Error while creating admin");
                                }
                            });
                        }
                        else {
                            $(".admin_dashboard_content_users_popup_addadmin_content_form_pwd").css("border", "2px solid red");
                            alert("Password does not meet requirements (Uppercase and lowercase alphabet(s), number(s) and at least 6 characters). Please enter a valid password.");
                        }
                    }
                },
                error: function (error) {
                console.log(error);
                alert("Something went wrong");
            }
            });
        }
        else {
            $(".admin_dashboard_content_users_popup_addadmin_content_form_name").css("border", "2px solid red");
            $(".admin_dashboard_content_users_popup_addadmin_content_form_email").css("border", "2px solid red");
            $(".admin_dashboard_content_users_popup_addadmin_content_form_phone").css("border", "2px solid red");
            $(".admin_dashboard_content_users_popup_addadmin_content_form_pwd").css("border", "2px solid red");
            alert("All fields are required!");
        }
    }

    function userEdit(id, str, usernum) {
        $.ajax({
            type: "POST",
            url: '/Admin/GetEditUserDetails?id=' + id + '&index=' + usernum,
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                $("#userdetailsoverlay").remove();
                $(".admin_dashboard_content_users_popup").append(data);

                $("#usereditname").prop("disabled", "true");
                $("#usereditemail").prop("disabled", "true");
                $("#usereditnum").prop("disabled", "true");
                $(".admin_dashboard_content_users_popup_overlay_content_info_editbtns").prop("hidden", "true");

                $("#useroverlay").addClass("active");
            },
            error: function (error) {
                console.log(error);
                alert("Error while retrieving data");
            }
        });
    }

    function showLicense() {
        if($("#additionalimg").is(":visible"))
        {
            $("#additionalimg").prop("hidden", true);
            $("#licenseimg").prop("hidden", false);
            $("#userlicensebtn").html("Hide License");
            $("#useradditionalbtn").html("View Additional Identification");
        }
        else
        {
            if($("#licenseimg").is(":visible"))
            {
                $("#licenseimg").prop("hidden", true);
            $("#userlicensebtn").html("View License");
            }
            else
            {
                $("#licenseimg").prop("hidden", false);
            $("#userlicensebtn").html("Hide License");
            }
        }
    }

    function showAdditional() {
        if($("#licenseimg").is(":visible"))
        {
            $("#licenseimg").prop("hidden", true);
            $("#additionalimg").prop("hidden", false);
            $("#userlicensebtn").html("View License");
            $("#useradditionalbtn").html("Hide Additional Identification");
        }
        else
        {
            if($("#additionalimg").is(":visible"))
            {
                $("#additionalimg").prop("hidden", true);
                $("#useradditionalbtn").html("View Additional Identification");
            }
            else
            {
                $("#additionalimg").prop("hidden", false);
                $("#useradditionalbtn").html("Hide Additional Identification");
            }
        }
    }

    function closeUserOverlay() {
        $("#useroverlay").removeClass("active");
        $("#userdetailsoverlay").remove();
    }

    function cancelUserEdit() {
        $("#usereditname").prop("disabled", true);
        $("#usereditemail").prop("disabled", true);
        $("#usereditnum").prop("disabled", true);
        $("#usereditname").val($("#usereditnamehid").html());
        $("#usereditemail").val($("#usereditemailhid").html());
        $("#usereditnum").val($("#usereditnumhid").html());
        $(".admin_dashboard_content_users_popup_overlay_content_info_btns").prop("hidden", false);
        $(".admin_dashboard_content_users_popup_overlay_content_info_editbtns").prop("hidden", true);
    }


    //Booking Actions
    function bookingEdit(id, str, bookingnum) {
        if (str == 1) {
            $.ajax({
                type: "POST",
                url: '/Admin/GetEditBookingDetails?id=' + id + '&index=' + bookingnum,
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    $("#bookingdetailsoverlay").remove();
                    $(".admin_dashboard_content_bookings_popup").append(data);

                    
                    $(".admin_dashboard_content_bookings_popup_overlay_content_info_editbtns").prop("hidden", "true");

                    $("#bookingoverlay").addClass("active");
                },
                error: function () {
                    alert("Error while retrieving data");
                }
            });
        }
        else  {
            $.ajax({
                type: "POST",
                url: '/Admin/GetEditBookingDetails?id=' + id + '&index=' + bookingnum,
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    $("#bookingdetailsoverlay").remove();
                    $(".admin_dashboard_content_bookings_popup").append(data);


                    $(".admin_dashboard_content_bookings_popup_overlay_content_info_editbtns").prop("hidden", "true");

                    $("#bookingoverlay").addClass("active");
                },
                error: function () {
                    alert("Error while retrieving data");
                }
            });
        }
    }

    function closeBookingOverlay() {
        $("#bookingoverlay").removeClass("active");
        $("#bookingdetailsoverlay").remove();
    }

    function cancelBookingEdit() {
        
        $(".admin_dashboard_content_bookings_popup_overlay_content_info_btns").prop("hidden", false);
        $(".admin_dashboard_content_bookings_popup_overlay_content_info_editbtns").prop("hidden", true);
    }


    //Vehicle Actions
    $("#vehiclesearch").on("input", function (e) {
        if (e.keyCode == 8) {
            if ($(this).val().length < 3) {
                $("#vehiclesearchlbl").css("color", "red");
                searchVehicles("");
            }
            else {
                $("#vehiclesearchlbl").css("color", "grey");

                searchVehicles($("#vehiclesearch").val());
            }
        }
        else {
            if ($(this).val().length < 3) {
                $("#vehiclesearchlbl").css("color", "red");
            }
            else {
                $("#vehiclesearchlbl").css("color", "dimgrey");

                searchVehicles($("#vehiclesearch").val());
            }
        }
    });
    $("#vehiclesearch").keyup(function (e) {
        if (e.keyCode == 8) {
            if ($(this).val().length < 3) {
                $("#vehiclesearchlbl").css("color", "red");
                searchVehicles("");
            }
            else {
                $("#vehiclesearchlbl").css("color", "grey");

                searchVehicles($("#vehiclesearch").val());
            }
        }
    });
    $("#vehiclesearch").focusout(function (e) {
        if (e.keyCode == 8) {
            if ($(this).val().length < 3) {
                $("#vehiclesearchlbl").css("color", "red");
            }
            else {
                $("#vehiclesearchlbl").css("color", "grey");
            }
        }
        else {
            if ($(this).val().length < 3 && $(this).val().length > 0) {
                $("#vehiclesearchlbl").css("color", "red");
            }
            else {
                $("#vehiclesearchlbl").css("color", "dimgrey");
            }
        }
    });
    $("#vehicleloadmore").click(function () {
        $(".admin_dashboard_content_vehicles_loadmore").hide();
        $("#vehicleloading").show();

        var url = null;
        var type = null;
        var status = null;
        var c = 10 * $("#vehiclespage").val();

        if ($("#vehiclesearch").val().length !== 0) {
            url = '/Admin/GetVehicles?keyword=' + $("#vehiclesearch").val() + '&skip=' + c;
        }
        else if ($(".admin_dashboard_content_vehicles_filter_status").find("button.active").length !== 0 || $(".admin_dashboard_content_vehicles_filter_type").find("button.active").length !== 0) {
            if ($(".admin_dashboard_content_vehicles_filter_status").find("button.active").length !== 0) {
                if ($(".admin_dashboard_content_vehicles_filter_status").find("button.active").attr('id') === "availablefilter") {
                    status = "Available";
                }
                else {
                    status = "Booked";
                }
            }

            if ($(".admin_dashboard_content_vehicles_filter_type").find("button.active").length !== 0) {
                if ($(".admin_dashboard_content_vehicles_filter_type").find("button.active").attr('id') === "compactfilter") {
                    type = "Compact";
                }
                else if ($(".admin_dashboard_content_vehicles_filter_type").find("button.active").attr('id') === "luxuryfilter") {
                    type = "Luxury";
                }
                else if ($(".admin_dashboard_content_vehicles_filter_type").find("button.active").attr('id') === "offroadfilter") {
                    type = "Offroad";
                }
                else if ($(".admin_dashboard_content_vehicles_filter_type").find("button.active").attr('id') === "sedanfilter") {
                    type = "Sedan";
                }
                else if ($(".admin_dashboard_content_vehicles_filter_type").find("button.active").attr('id') === "sportsfilter") {
                    type = "Sports";
                }
                else if ($(".admin_dashboard_content_vehicles_filter_type").find("button.active").attr('id') === "suvfilter") {
                    type = "SUV";
                }
                else if ($(".admin_dashboard_content_vehicles_filter_type").find("button.active").attr('id') === "vanfilter") {
                    type = "Van";
                }
                else {
                    type = "Wagon";
                }
            }
            
            if (status !== null && type !== null) {
                url = '/Admin/GetVehicles?status=' + status + '&type=' + type + '&skip=' + c;
            }
            else if (status !== null) {
                url = '/Admin/GetVehicles?status=' + status + '&skip=' + c;
            }
            else {
                url = '/Admin/GetVehicles?type=' + type + '&skip=' + c;
            }
        }
        else {
            url = '/Admin/GetVehicles?skip=' + c;
        }

        $.ajax({
            type: "POST",
            url: url,
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                setTimeout(function () {
                    $(".admin_dashboard_content_vehicles_vehicles_table tbody").append(data);
                    $("#vehicleloading").hide();
                    $("#vehiclespage").val(parseInt($("#vehiclespage").val()) + 1);

                    var calc = 10 * $("#vehiclespage").val();
                    var calc1 = $("#numofvehicles").val();
                    var calc2 = $("#vehiclespage").val();
                    if ($("#numofvehicles").val() > $(".admin_dashboard_content_vehicles_vehicles_table tbody tr").length && $(".admin_dashboard_content_vehicles_vehicles_table tbody tr").length >= calc) {
                        $(".admin_dashboard_content_vehicles_loadmore").show();
                    }
                }, 1000);
            },
            error: function (error) {
                console.log(error);
                alert("Error while retrieving data");
            }
        });
    });
    $("#availablefilter").click(function () {
        if (!$(this).hasClass("active")) {
            if ($(".admin_dashboard_content_vehicles_filter_type").length !== 0) {
                if ($("#compactfilter").hasClass("active")) {
                    filterStatusType("Available", "Compact");
                }
                else if ($("#luxuryfilter").hasClass("active")) {
                    filterStatusType("Available", "Luxury");
                }
                else if ($("#offroadfilter").hasClass("active")) {
                    filterStatusType("Available", "Offroad");
                }
                else if ($("#sedanfilter").hasClass("active")) {
                    filterStatusType("Available", "Sedan");
                }
                else if ($("#sportsfilter").hasClass("active")) {
                    filterStatusType("Available", "Sports");
                }
                else if ($("#suvfilter").hasClass("active")) {
                    filterStatusType("Available", "SUV");
                }
                else if ($("#vanfilter").hasClass("active")) {
                    filterStatusType("Available", "Van");
                }
                else {
                    filterStatusType("Available", "Wagon");
                }
            }
            else {
                filterVehicleStatus("Available");
            }
        }
        else {
            $("#availablefilter").removeClass("active");
            
            if ($(".admin_dashboard_content_vehicles_filter_type").length !== 0) {
                if ($("#compactfilter").hasClass("active")) {
                    filterType("Compact");
                }
                else if ($("#luxuryfilter").hasClass("active")) {
                    filterType("Luxury");
                }
                else if ($("#offroadfilter").hasClass("active")) {
                    filterType("Offroad");
                }
                else if ($("#sedanfilter").hasClass("active")) {
                    filterType("Sedan");
                }
                else if ($("#sportsfilter").hasClass("active")) {
                    filterType("Sports");
                }
                else if ($("#suvfilter").hasClass("active")) {
                    filterType("SUV");
                }
                else if ($("#vanfilter").hasClass("active")) {
                    filterType("Van");
                }
                else {
                    filterType("Wagon");
                }
            }
            else {
                getAllVehicles();
            }
        }
    });
    $("#bookedfilter").click(function () {
        if (!$(this).hasClass("active")) {
            if ($(".admin_dashboard_content_vehicles_filter_type").length !== 0) {
                if ($("#compactfilter").hasClass("active")) {
                    filterStatusType("Booked", "Compact");
                }
                else if ($("#luxuryfilter").hasClass("active")) {
                    filterStatusType("Booked", "Luxury");
                }
                else if ($("#offroadfilter").hasClass("active")) {
                    filterStatusType("Booked", "Offroad");
                }
                else if ($("#sedanfilter").hasClass("active")) {
                    filterStatusType("Booked", "Sedan");
                }
                else if ($("#sportsfilter").hasClass("active")) {
                    filterStatusType("Booked", "Sports");
                }
                else if ($("#suvfilter").hasClass("active")) {
                    filterStatusType("Booked", "SUV");
                }
                else if ($("#vanfilter").hasClass("active")) {
                    filterStatusType("Booked", "Van");
                }
                else {
                    filterStatusType("Booked", "Wagon");
                }
            }
            else {
                filterVehicleStatus("Booked");
            }
        }
        else {
            $("#bookedfilter").removeClass("active");
            
            if ($(".admin_dashboard_content_vehicles_filter_type").length !== 0) {
                if ($("#compactfilter").hasClass("active")) {
                    filterType("Compact");
                }
                else if ($("#luxuryfilter").hasClass("active")) {
                    filterType("Luxury");
                }
                else if ($("#offroadfilter").hasClass("active")) {
                    filterType("Offroad");
                }
                else if ($("#sedanfilter").hasClass("active")) {
                    filterType("Sedan");
                }
                else if ($("#sportsfilter").hasClass("active")) {
                    filterType("Sports");
                }
                else if ($("#suvfilter").hasClass("active")) {
                    filterType("SUV");
                }
                else if ($("#vanfilter").hasClass("active")) {
                    filterType("Van");
                }
                else {
                    filterType("Wagon");
                }
            }
            else {
                getAllVehicles();
            }
        }
    });
    $("#compactfilter").click(function () {
        if (!$(this).hasClass("active")) {
            if ($(".admin_dashboard_content_vehicles_filter_status").find("button.active").length !== 0) {
                if ($("#availablefilter").hasClass("active")) {
                    filterStatusType("Available", "Compact");
                }
                else {
                    filterStatusType("Booked", "Compact");
                }
            }
            else {
                filterType("Compact");
            }
        }
        else {
            $("#compactfilter").removeClass("active");

            if ($(".admin_dashboard_content_vehicles_filter_status").find("button.active").length !== 0) {
                if ($("#availablefilter").hasClass("active")) {
                    filterStatus("Available");
                }
                else {
                    filterStatus("Booked");
                }
            }
            else {
                getAllVehicles();
            }
        }
    });
    $("#luxuryfilter").click(function () {
        if (!$(this).hasClass("active")) {
            if ($(".admin_dashboard_content_vehicles_filter_status").find("button.active").length !== 0) {
                if ($("#availablefilter").hasClass("active")) {
                    filterStatusType("Available", "Luxury");
                }
                else {
                    filterStatusType("Booked", "Luxury");
                }
            }
            else {
                filterType("Luxury");
            }
        }
        else {
            $("#luxuryfilter").removeClass("active");

            if ($(".admin_dashboard_content_vehicles_filter_status").find("button.active").length !== 0) {
                if ($("#availablefilter").hasClass("active")) {
                    filterStatus("Available");
                }
                else {
                    filterStatus("Booked");
                }
            }
            else {
                getAllVehicles();
            }
        }
    });
    $("#offroadfilter").click(function () {
        if (!$(this).hasClass("active")) {
            if ($(".admin_dashboard_content_vehicles_filter_status").find("button.active").length !== 0) {
                if ($("#availablefilter").hasClass("active")) {
                    filterStatusType("Available", "Offroad");
                }
                else {
                    filterStatusType("Booked", "Offroad");
                }
            }
            else {
                filterType("Offroad");
            }
        }
        else {
            $("#offroadfilter").removeClass("active");

            if ($(".admin_dashboard_content_vehicles_filter_status").find("button.active").length !== 0) {
                if ($("#availablefilter").hasClass("active")) {
                    filterStatus("Available");
                }
                else {
                    filterStatus("Booked");
                }
            }
            else {
                getAllVehicles();
            }
        }
    });
    $("#sedanfilter").click(function () {
        if (!$(this).hasClass("active")) {
            if ($(".admin_dashboard_content_vehicles_filter_status").find("button.active").length !== 0) {
                if ($("#availablefilter").hasClass("active")) {
                    filterStatusType("Available", "Sedan");
                }
                else {
                    filterStatusType("Booked", "Sedan");
                }
            }
            else {
                filterType("Sedan");
            }
        }
        else {
            $("#sedanfilter").removeClass("active");

            if ($(".admin_dashboard_content_vehicles_filter_status").find("button.active").length !== 0) {
                if ($("#availablefilter").hasClass("active")) {
                    filterStatus("Available");
                }
                else {
                    filterStatus("Booked");
                }
            }
            else {
                getAllVehicles();
            }
        }
    });
    $("#sportsfilter").click(function () {
        if (!$(this).hasClass("active")) {
            if ($(".admin_dashboard_content_vehicles_filter_status").find("button.active").length !== 0) {
                if ($("#availablefilter").hasClass("active")) {
                    filterStatusType("Available", "Sports");
                }
                else {
                    filterStatusType("Booked", "Sports");
                }
            }
            else {
                filterType("Sports");
            }
        }
        else {
            $("#sportsfilter").removeClass("active");

            if ($(".admin_dashboard_content_vehicles_filter_status").find("button.active").length !== 0) {
                if ($("#availablefilter").hasClass("active")) {
                    filterStatus("Available");
                }
                else {
                    filterStatus("Booked");
                }
            }
            else {
                getAllVehicles();
            }
        }
    });
    $("#suvfilter").click(function () {
        if (!$(this).hasClass("active")) {
            if ($(".admin_dashboard_content_vehicles_filter_status").find("button.active").length !== 0) {
                if ($("#availablefilter").hasClass("active")) {
                    filterStatusType("Available", "SUV");
                }
                else {
                    filterStatusType("Booked", "SUV");
                }
            }
            else {
                filterType("SUV");
            }
        }
        else {
            $("#suvfilter").removeClass("active");

            if ($(".admin_dashboard_content_vehicles_filter_status").find("button.active").length !== 0) {
                if ($("#availablefilter").hasClass("active")) {
                    filterStatus("Available");
                }
                else {
                    filterStatus("Booked");
                }
            }
            else {
                getAllVehicles();
            }
        }
    });
    $("#vanfilter").click(function () {
        if (!$(this).hasClass("active")) {
            if ($(".admin_dashboard_content_vehicles_filter_status").find("button.active").length !== 0) {
                if ($("#availablefilter").hasClass("active")) {
                    filterStatusType("Available", "Van");
                }
                else {
                    filterStatusType("Booked", "Van");
                }
            }
            else {
                filterType("Van");
            }
        }
        else {
            $("#vanfilter").removeClass("active");

            if ($(".admin_dashboard_content_vehicles_filter_status").find("button.active").length !== 0) {
                if ($("#availablefilter").hasClass("active")) {
                    filterStatus("Available");
                }
                else {
                    filterStatus("Booked");
                }
            }
            else {
                getAllVehicles();
            }
        }
    });
    $("#wagonfilter").click(function () {
        if (!$(this).hasClass("active")) {
            if ($(".admin_dashboard_content_vehicles_filter_status").find("button.active").length !== 0) {
                if ($("#availablefilter").hasClass("active")) {
                    filterStatusType("Available", "Wagon");
                }
                else {
                    filterStatusType("Booked", "Wagon");
                }
            }
            else {
                filterType("Wagon");
            }
        }
        else {
            $("#wagonfilter").removeClass("active");

            if ($(".admin_dashboard_content_vehicles_filter_status").find("button.active").length !== 0) {
                if ($("#availablefilter").hasClass("active")) {
                    filterStatus("Available");
                }
                else {
                    filterStatus("Booked");
                }
            }
            else {
                getAllVehicles();
            }
        }
    });

    function filterStatusType(status, type) {
        $(".admin_dashboard_content_vehicles_loadmore").hide();
        $("#vehiclesempty").hide();

        if ($("#vehiclesearch").val().length !== 0) {
            $("#vehiclesearch").val("")
        }

        $.ajax({
            type: "POST",
            url: '/Admin/GetVehicles?status=' + status + '&type=' + type,
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                $("#vehicletoploading").show();

                if (data[0] != 0) {
                    $("#vehiclespage").val(0);
                    $("#numofvehicles").val(data[0]);
                    delete data[0];

                    $(".admin_dashboard_content_vehicles_filter_type button").removeClass("active");
                    $(".admin_dashboard_content_vehicles_filter_status button").removeClass("active");

                    if (status == "Available") {
                        $("#availablefilter").addClass("active");
                    }
                    else {
                        $("#bookedfilter").addClass("active");
                    }
                    if (type == "Compact") {
                        $("#compactfilter").addClass("active");
                    }
                    else if (type == "Luxury") {
                        $("#luxuryfilter").addClass("active");
                    }
                    else if (type == "Offroad") {
                        $("#offroadfilter").addClass("active");
                    }
                    else if (type == "Sedan") {
                        $("#sedanfilter").addClass("active");
                    }
                    else if (type == "Sports") {
                        $("#sportsfilter").addClass("active");
                    }
                    else if (type == "SUV") {
                        $("#suvfilter").addClass("active");
                    }
                    else if (type == "Van") {
                        $("#vanfilter").addClass("active");
                    }
                    else {
                        $("#wagonfilter").addClass("active");
                    }

                    setTimeout(function () {
                        $("#vehicletoploading").hide();

                        if (data.length != 0) {
                            $(".admin_dashboard_content_vehicles_vehicles_table tbody").empty();
                            $(".admin_dashboard_content_vehicles_vehicles_table tbody").append(data);

                            $("#vehiclespage").val(parseInt($("#vehiclespage").val()) + 1);

                            var calc = 10 * $("#vehiclespage").val();
                            if ($("#numofvehicles").val() > $(".admin_dashboard_content_vehicles_vehicles_table tbody tr").length && $(".admin_dashboard_content_vehicles_vehicles_table tbody tr").length >= calc) {
                                $(".admin_dashboard_content_vehicles_loadmore").show();
                            }
                        }
                        else {
                            $(".admin_dashboard_content_vehicles_vehicles_table tbody").empty();
                            $("#vehiclesempty").show();
                        }
                    }, 1000);
                }
            },
            error: function (error) {
                console.log(error);
                alert("Error while retrieving data");
            }
        });
    }
    function filterType(type) {
        $(".admin_dashboard_content_vehicles_loadmore").hide();
        $("#vehiclesempty").hide();

        if ($("#vehiclesearch").val().length !== 0) {
            $("#vehiclesearch").val("")
        }

        $.ajax({
            type: "POST",
            url: '/Admin/GetVehicles?type=' + type,
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                $("#vehicletoploading").show();

                if (data[0] != 0) {
                    $("#vehiclespage").val(0);
                    $("#numofvehicles").val(data[0]);
                    delete data[0];

                    $(".admin_dashboard_content_vehicles_filter_type button").removeClass("active");

                    if (type == "Compact") {
                        $("#compactfilter").addClass("active");
                    }
                    else if (type == "Luxury") {
                        $("#luxuryfilter").addClass("active");
                    }
                    else if (type == "Offroad") {
                        $("#offroadfilter").addClass("active");
                    }
                    else if (type == "Sedan") {
                        $("#sedanfilter").addClass("active");
                    }
                    else if (type == "Sports") {
                        $("#sportsfilter").addClass("active");
                    }
                    else if (type == "SUV") {
                        $("#suvfilter").addClass("active");
                    }
                    else if (type == "Van") {
                        $("#vanfilter").addClass("active");
                    }
                    else {
                        $("#wagonfilter").addClass("active");
                    }

                    setTimeout(function () {
                        $("#vehicletoploading").hide();

                        if (data.length != 0) {
                            $(".admin_dashboard_content_vehicles_vehicles_table tbody").empty();
                            $(".admin_dashboard_content_vehicles_vehicles_table tbody").append(data);

                            $("#vehiclespage").val(parseInt($("#vehiclespage").val()) + 1);

                            var calc = 10 * $("#vehiclespage").val();
                            if ($("#numofvehicles").val() > $(".admin_dashboard_content_vehicles_vehicles_table tbody tr").length && $(".admin_dashboard_content_vehicles_vehicles_table tbody tr").length >= calc) {
                                $(".admin_dashboard_content_vehicles_loadmore").show();
                            }
                        }
                        else {
                            $(".admin_dashboard_content_vehicles_vehicles_table tbody").empty();
                            $("#vehiclesempty").show();
                        }
                    }, 1000);
                }
            },
            error: function (error) {
                console.log(error);
                alert("Error while retrieving data");
            }
        });
    }
    function filterVehicleStatus(status) {
        $(".admin_dashboard_content_vehicles_loadmore").hide();
        $("#vehiclesempty").hide();

        if ($("#vehiclesearch").val().length !== 0) {
            $("#vehiclesearch").val("")
        }

        $.ajax({
            type: "POST",
            url: '/Admin/GetVehicles?status=' + status,
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                $("#vehicletoploading").show();

                if (data[0] != 0) {
                    $("#vehiclespage").val(0);
                    $("#numofvehicles").val(data[0]);
                    delete data[0];

                    $(".admin_dashboard_content_vehicles_filter_status button").removeClass("active");

                    if (status == "Available") {
                        $("#availablefilter").addClass("active");
                    }
                    else {
                        $("#bookedfilter").addClass("active");
                    }

                    setTimeout(function () {
                        $("#vehicletoploading").hide();

                        if (data.length != 0) {
                            $(".admin_dashboard_content_vehicles_vehicles_table tbody").empty();
                            $(".admin_dashboard_content_vehicles_vehicles_table tbody").append(data);

                            $("#vehiclespage").val(parseInt($("#vehiclespage").val()) + 1);

                            var calc = 10 * $("#vehiclespage").val();
                            if ($("#numofvehicles").val() > $(".admin_dashboard_content_vehicles_vehicles_table tbody tr").length && $(".admin_dashboard_content_vehicles_vehicles_table tbody tr").length >= calc) {
                                $(".admin_dashboard_content_vehicles_loadmore").show();
                            }
                        }
                        else {
                            $(".admin_dashboard_content_vehicles_vehicles_table tbody").empty();
                            $("#vehiclesempty").show();
                        }
                    }, 1000);
                }
            },
            error: function (error) {
                console.log(error);
                alert("Error while retrieving data");
            }
        });
    }
    function getAllVehicles() {
        $(".admin_dashboard_content_vehicles_loadmore").hide();
        $("#vehiclesempty").hide();

        $.ajax({
            type: "POST",
            url: '/Admin/GetVehicles',
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                $("#vehicletoploading").show();

                if (data[0] != 0) {
                    $("#vehiclespage").val(0);
                    $("#numofvehicles").val(data[0]);
                    delete data[0];

                    setTimeout(function () {
                        $("#vehicletoploading").hide();

                        if (data.length != 0) {
                            $(".admin_dashboard_content_vehicles_vehicles_table tbody").empty();
                            $(".admin_dashboard_content_vehicles_vehicles_table tbody").append(data);

                            $("#vehiclespage").val(parseInt($("#vehiclespage").val()) + 1);

                            var calc = 10 * $("#vehiclespage").val();
                            if ($("#numofvehicles").val() > $(".admin_dashboard_content_vehicles_vehicles_table tbody tr").length && $(".admin_dashboard_content_vehicles_vehicles_table tbody tr").length >= calc) {
                                $(".admin_dashboard_content_vehicles_loadmore").show();
                            }
                        }
                        else {
                            $(".admin_dashboard_content_vehicles_vehicles_table tbody").empty();
                            $("#vehiclesempty").show();
                        }
                    }, 1000);
                }
            },
            error: function (error) {
                console.log(error);
                alert("Error while retrieving data");
            }
        });
    }
    function searchVehicles(keyword) {
        $(".admin_dashboard_content_vehicles_loadmore").hide();
        $("#vehiclesempty").hide();

        $(".admin_dashboard_content_vehicles_filter_type button").removeClass("active");
        $(".admin_dashboard_content_vehicles_filter_status button").removeClass("active");

        $.ajax({
            type: "POST",
            url: '/Admin/GetVehicles?keyword=' + keyword,
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                if (data[0] != 0) {
                    $("#vehiclespage").val(0);
                    $("#numofvehicles").val(data[0]);
                    delete data[0];

                        if (data.length != 0) {
                            $(".admin_dashboard_content_vehicles_vehicles_table tbody").empty();
                            $(".admin_dashboard_content_vehicles_vehicles_table tbody").append(data);

                            $("#vehiclespage").val(parseInt($("#vehiclespage").val()) + 1);

                            var calc = 10 * $("#vehiclespage").val();
                            if ($("#numofvehicles").val() > $(".admin_dashboard_content_vehicles_vehicles_table tbody tr").length && $(".admin_dashboard_content_vehicles_vehicles_table tbody tr").length >= calc) {
                                $(".admin_dashboard_content_vehicles_loadmore").show();
                            }
                        }
                        else {
                            $(".admin_dashboard_content_vehicles_vehicles_table tbody").empty();
                            $("#vehiclesempty").show();
                        }
                }
            },
            error: function (error) {
                console.log(error);
                alert("Error while retrieving data");
            }
        });
    }

    function enableAddVehicle() {
        $("#vehicleoverlay").addClass("active");
        $("#addvehicleoverlay").addClass("active");
        $("#addvehicleoverlay input").val("");
    }

    function closeAddVehicle() {
        $("#vehicleoverlay").removeClass("active");
        $("#addvehicleoverlay").removeClass("active");
    }

    function addVehicle() {
        var manufacturer = $("#vehiclemanufacturer").val();
        var model = $("#vehiclemodel").val();
        var year = $("#vehicleyear").val();
        var color = $("#vehiclecolor").val();
        var category = $("#vehiclecategory").find(":selected").text();
        var fueltype = $("#vehiclefueltype").find(":selected").text();
        var plate = $("#vehicleplate").val();
        var rate = $("#vehiclerate").val();
        var vehicleimage = $('#vehicleimage')[0].files[0];
        let formData = new FormData()

        formData.append('manufacturer', manufacturer);
        formData.append('model', model);
        formData.append('year', year);
        formData.append('color', color);
        formData.append('category', category);
        formData.append('fuelType', fueltype);
        formData.append('plate', plate);
        formData.append('rate', rate);
        formData.append('imageFile', vehicleimage);

        console.log(formData);

        $("#vehiclemanufacturer").css("border", "2px solid gray");
        $("#vehiclemodel").css("border", "2px solid gray");
        $("#vehicleyear").css("border", "2px solid gray");
        $("#vehiclecolor").css("border", "2px solid gray");
        $("#vehiclecategory").css("border", "2px solid gray");
        $("#vehiclefueltype").css("border", "2px solid gray");
        $("#vehicleplate").css("border", "2px solid gray"); 
        $("#vehiclerate").css("border", "2px solid gray");

        if (manufacturer != "" && model != "" && year != "" && color != "" && category != "" && fueltype != "" && plate != "" && rate != "") {
            $.ajax({
                type: "POST",
                url: '/Admin/CheckPlate?plate=' + plate,
                dataType: "json",
                async: false,
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    if (data == "Failure") {
                        $("#vehicleplate").css("border", "2px solid red");
                        alert("This plate number already exists.");
                    }
                    else {
                        $.ajax({
                            url : '/Admin/AddVehicle',
                            type: 'POST',
                            dataType: 'json',
                            data: formData,
                            processData: false,
                            contentType: false,
                            success: function (data) {
                                    if (data == "Success") {
                                        closeAddVehicle();
                                        $(".admin_dashboard_content_vehicles_filter button").removeClass("active");
                                        getAllVehicles();
                                        alert("Vehicle created successfully!");
                                    }
                                    else {
                                        alert("Error while creating vehicle");
                                    }
                                },
                            error: function () {
                                alert("Error while creating vehicle");
                            }
                        }).done(function(response) {
                            console.log(response);
                        });
                    }
                },
                error: function (error) {
                    console.log(error);
                    alert("Something went wrong");
                }
            });
        }
        else {
            $("#vehiclemanufacturer").css("border", "2px solid red");
            $("#vehiclemodel").css("border", "2px solid red");
            $("#vehicleyear").css("border", "2px solid red");
            $("#vehiclecolor").css("border", "2px solid red");
            $("#vehiclecategory").css("border", "2px solid red");
            $("#vehiclefueltype").css("border", "2px solid red");
            $("#vehicleplate").css("border", "2px solid red");
            $("#vehiclerate").css("border", "2px solid red");
            alert("All fields are required!");
        }
    }

    function vehicleEdit(id, str, vehiclenum) {
        if (str == 1) {
            $.ajax({
                type: "POST",
                url: '/Admin/GetEditVehicleDetails?id=' + id + '&index=' + vehiclenum,
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    $("#vehicledetailsoverlay").remove();
                    $(".admin_dashboard_content_vehicles_popup").append(data);

                    
                    $(".admin_dashboard_content_vehicles_popup_overlay_content_info_editbtns").prop("hidden", "true");

                    $("#vehicleoverlay").addClass("active");
                },
                error: function () {
                    alert("Error while retrieving data");
                }
            });
        }
        else  {
            $.ajax({
                type: "POST",
                url: '/Admin/GetEditVehicleDetails?id=' + id + '&index=' + vehiclenum,
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    $("#vehicledetailsoverlay").remove();
                    $(".admin_dashboard_content_vehicles_popup").append(data);


                    $(".admin_dashboard_content_vehicles_popup_overlay_content_info_editbtns").prop("hidden", "true");

                    $("#vehicleoverlay").addClass("active");
                },
                error: function () {
                    alert("Error while retrieving data");
                }
            });
        }
    }

    function closeVehicleOverlay() {
        $("#vehicleoverlay").removeClass("active");
        $("#vehicledetailsoverlay").remove();
    }

    function cancelVehicleEdit() {
        
        $(".admin_dashboard_content_vehicles_popup_overlay_content_info_btns").prop("hidden", false);
        $(".admin_dashboard_content_vehicles_popup_overlay_content_info_editbtns").prop("hidden", true);
    }


    //Equipment Actions
    $("#equipmentsearch").on("input", function (e) {
        if (e.keyCode == 8) {
            if ($(this).val().length < 3) {
                $("#equipmentsearchlbl").css("color", "red");
                searchEquipment("");
            }
            else {
                $("#equipmentsearchlbl").css("color", "grey");

                searchEquipment($("#equipmentsearch").val());
            }
        }
        else {
            if ($(this).val().length < 3) {
                $("#equipmentsearchlbl").css("color", "red");
            }
            else {
                $("#equipmentsearchlbl").css("color", "dimgrey");

                searchEquipment($("#equipmentsearch").val());
            }
        }
    });
    $("#equipmentsearch").keyup(function (e) {
        if (e.keyCode == 8) {
            if ($(this).val().length < 3) {
                $("#equipmentsearchlbl").css("color", "red");
                searchEquipment("");
            }
            else {
                $("#equipmentsearchlbl").css("color", "grey");

                searchEquipment($("#equipmentsearch").val());
            }
        }
    });
    $("#equipmentsearch").focusout(function (e) {
        if (e.keyCode == 8) {
            if ($(this).val().length < 3) {
                $("#equipmentsearchlbl").css("color", "red");
            }
            else {
                $("#equipmentsearchlbl").css("color", "grey");
            }
        }
        else {
            if ($(this).val().length < 3 && $(this).val().length > 0) {
                $("#equipmentsearchlbl").css("color", "red");
            }
            else {
                $("#equipmentsearchlbl").css("color", "dimgrey");
            }
        }
    });
    $("#equipmentloadmore").click(function () {
        $(".admin_dashboard_content_equipment_loadmore").hide();
        $("#equipmentloading").show();

        var url = null;
        var type = null;
        var status = null;
        var c = 10 * $("#equipmentpage").val();

        if ($("#equipmentsearch").val().length !== 0) {
            url = '/Admin/GetEquipment?keyword=' + $("#equipmentsearch").val() + '&skip=' + c;
        }
        else {
            url = '/Admin/GetEquipment?skip=' + c;
        }

        $.ajax({
            type: "POST",
            url: url,
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                setTimeout(function () {
                    $(".admin_dashboard_content_equipment_equipment_table tbody").append(data);
                    $("#equipmentloading").hide();
                    $("#equipmentpage").val(parseInt($("#equipmentpage").val()) + 1);

                    var calc = 10 * $("#equipmentpage").val();
                    var calc1 = $("#numofequipment").val();
                    var calc2 = $("#equipmentpage").val();
                    if ($("#numofequipment").val() > $(".admin_dashboard_content_equipment_equipment_table tbody tr").length && $(".admin_dashboard_content_equipment_equipment_table tbody tr").length >= calc) {
                        $(".admin_dashboard_content_equipment_loadmore").show();
                    }
                }, 1000);
            },
            error: function (error) {
                console.log(error);
                alert("Error while retrieving data");
            }
        });
    });

    function getAllEquipment() {
        $(".admin_dashboard_content_equipment_loadmore").hide();
        $("#equipmentempty").hide();

        $.ajax({
            type: "POST",
            url: '/Admin/GetEquipment',
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                $("#equipmenttoploading").show();

                if (data[0] != 0) {
                    $("#equipmentpage").val(0);
                    $("#numofequipment").val(data[0]);
                    delete data[0];

                    setTimeout(function () {
                        $("#equipmenttoploading").hide();

                        if (data.length != 0) {
                            $(".admin_dashboard_content_equipment_equipment_table tbody").empty();
                            $(".admin_dashboard_content_equipment_equipment_table tbody").append(data);

                            $("#equipmentpage").val(parseInt($("#equipmentpage").val()) + 1);

                            var calc = 10 * $("#equipmentpage").val();
                            if ($("#numofequipment").val() > $(".admin_dashboard_content_equipment_equipment_table tbody tr").length && $(".admin_dashboard_content_equipment_equipment_table tbody tr").length >= calc) {
                                $(".admin_dashboard_content_equipment_loadmore").show();
                            }
                        }
                        else {
                            $(".admin_dashboard_content_equipment_equipment_table tbody").empty();
                            $("#equipmentempty").show();
                        }
                    }, 1000);
                }
            },
            error: function (error) {
                console.log(error);
                alert("Error while retrieving data");
            }
        });
    }
    function searchEquipment(keyword) {
        $(".admin_dashboard_content_equipment_loadmore").hide();
        $("#equipmentempty").hide();

        $.ajax({
            type: "POST",
            url: '/Admin/GetEquipment?keyword=' + keyword,
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                if (data[0] != 0) {
                    $("#equipmentpage").val(0);
                    $("#numofequipment").val(data[0]);
                    delete data[0];

                        if (data.length != 0) {
                            $(".admin_dashboard_content_equipment_equipment_table tbody").empty();
                            $(".admin_dashboard_content_equipment_equipment_table tbody").append(data);

                            $("#equipmentpage").val(parseInt($("#equipmentpage").val()) + 1);

                            var calc = 10 * $("#equipmentpage").val();
                            if ($("#numofequipment").val() > $(".admin_dashboard_content_equipment_equipment_table tbody tr").length && $(".admin_dashboard_content_equipment_equipment_table tbody tr").length >= calc) {
                                $(".admin_dashboard_content_equipment_loadmore").show();
                            }
                        }
                        else {
                            $(".admin_dashboard_content_equipment_equipment_table tbody").empty();
                            $("#equipmentempty").show();
                        }
                }
            },
            error: function (error) {
                console.log(error);
                alert("Error while retrieving data");
            }
        });
    }

    function enableAddEquipment() {
        $("#equipmentoverlay").addClass("active");
        $("#addequipmentoverlay").addClass("active");
        $("#addequipmentoverlay input").val("");
    }

    function closeAddEquipment() {
        $("#equipmentoverlay").removeClass("active");
        $("#addequipmentoverlay").removeClass("active");
    }

    function addEquipment() {
        var name = $("#equipmentname").val();
        var stock = $("#equipmentstock").val();
        var equipmentimage = $('#equipmentimage')[0].files[0];
        let formData = new FormData()

        formData.append('name', name);
        formData.append('stock', stock);
        formData.append('imageFile', equipmentimage);

        console.log(formData);

        $("#equipmentname").css("border", "2px solid gray");
        $("#equipmentstock").css("border", "2px solid gray");

        if (name != "" && stock != "") {
            $.ajax({
                            url : '/Admin/AddEquipment',
                            type: 'POST',
                            dataType: 'json',
                            data: formData,
                            processData: false,
                            contentType: false,
                            success: function (data) {
                                    if (data == "Success") {
                                        closeAddEquipment();
                                        getAllEquipment();
                                        alert("Equipment added successfully!");
                                    }
                                    else {
                                        alert("Error while adding equipment");
                                    }
                                },
                            error: function () {
                                alert("Error while adding equipment");
                            }
                        }).done(function(response) {
                            alert(response);
                            console.log(response);
                        });
        }
        else {
            $("#equipmentname").css("border", "2px solid red");
            $("#equipmentstock").css("border", "2px solid red");
            alert("All fields are required!");
        }
    }

    function equipmentEdit(id, str, equipmentnum) {
        if (str == 1) {
            $.ajax({
                type: "POST",
                url: '/Admin/GetEditEquipmentDetails?id=' + id + '&index=' + equipmentnum,
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    $("#equipmentdetailsoverlay").remove();
                    $(".admin_dashboard_content_equipments_popup").append(data);

                    
                    $(".admin_dashboard_content_equipments_popup_overlay_content_info_editbtns").prop("hidden", "true");

                    $("#equipmentoverlay").addClass("active");
                },
                error: function () {
                    alert("Error while retrieving data");
                }
            });
        }
        else  {
            $.ajax({
                type: "POST",
                url: '/Admin/GetEditEquipmentDetails?id=' + id + '&index=' + equipmentnum,
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    $("#equipmentdetailsoverlay").remove();
                    $(".admin_dashboard_content_equipments_popup").append(data);


                    $(".admin_dashboard_content_equipments_popup_overlay_content_info_editbtns").prop("hidden", "true");

                    $("#equipmentoverlay").addClass("active");
                },
                error: function () {
                    alert("Error while retrieving data");
                }
            });
        }
    }

    function closeEquipmentOverlay() {
        $("#equipmentoverlay").removeClass("active");
        $("#equipmentdetailsoverlay").remove();
    }

    function cancelEquipmentEdit() {
        
        $(".admin_dashboard_content_equipments_popup_overlay_content_info_btns").prop("hidden", false);
        $(".admin_dashboard_content_equipments_popup_overlay_content_info_editbtns").prop("hidden", true);
    }
</script>